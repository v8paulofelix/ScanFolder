<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Discos</title>
    <style>
        * { box-sizing: border-box; font-family: Arial, sans-serif; }
        body { max-width: 800px; margin: 0 auto; padding: 20px; }
        .search-box { width: 100%; padding: 12px; font-size: 16px; }
        .results { margin-top: 20px; }
        .result-item { 
            background: #f5f5f5; 
            border-left: 4px solid #4CAF50;
            padding: 10px;
            margin-bottom: 10px;
        }
        .disk-name { font-weight: bold; color: #333; }
        .path { color: #666; font-family: monospace; }
    </style>
</head>
<body>
    <h1>Buscador de Carpetas en Discos</h1>
    <input type="text" 
           id="searchInput" 
           class="search-box" 
           placeholder="Escribe el nombre de la carpeta...">
    
    <div id="resultsContainer" class="results"></div>

    <script>
        const searchInput = document.getElementById('searchInput');
        const resultsContainer = document.getElementById('resultsContainer');
        
        // Buscar despuÃ©s de 500ms de inactividad
        let searchTimer;
        searchInput.addEventListener('input', () => {
            clearTimeout(searchTimer);
            const query = searchInput.value.trim();
            
            if(query.length < 2) {
                resultsContainer.innerHTML = '';
                return;
            }
            
            searchTimer = setTimeout(() => {
                fetch(`/search?q=${encodeURIComponent(query)}`)
                    .then(response => response.json())
                    .then(data => {
                        if(data.length === 0) {
                            resultsContainer.innerHTML = '<p>No se encontraron resultados</p>';
                            return;
                        }
                        
                        let html = '';
                        data.forEach(item => {
                            html += `
                            <div class="result-item">
                                <div class="disk-name">${item.disk}</div>
                                <div class="path">${item.path}</div>
                            </div>`;
                        });
                        resultsContainer.innerHTML = html;
                    });
            }, 500);
        });
    </script>
</body>
</html>